<!-- ══════════ SIDEBAR ══════════ -->
<aside class="sidebar" id="sidebar">

  <div class="sidebar-logo">
    <div class="logo-icon">B</div>
    <div class="logo-text">Bank<span>Demo</span></div>
  </div>

  <nav class="sidebar-nav">
    <p class="nav-section-label">Principal</p>

    <a href="/dashboard" class="nav-item <%= activePage === 'dashboard' ? 'active' : '' %>">
      <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.3">
        <rect x="1" y="1" width="6" height="6" rx="1"/>
        <rect x="9" y="1" width="6" height="6" rx="1"/>
        <rect x="1" y="9" width="6" height="6" rx="1"/>
        <rect x="9" y="9" width="6" height="6" rx="1"/>
      </svg>
      Tableau de bord
    </a>

    <a href="/transactions" class="nav-item <%= activePage === 'transactions' ? 'active' : '' %>">
      <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.3">
        <path d="M2 4h12M2 8h8M2 12h5"/>
        <path d="M13 9l2 2-2 2"/>
        <path d="M15 11h-4"/>
      </svg>
      Transactions
    </a>

    <a href="/transfer" class="nav-item <%= activePage === 'transfer' ? 'active' : '' %>">
      <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.3">
        <path d="M1 5h10M8 2l3 3-3 3"/>
        <path d="M15 11H5m3 3-3-3 3-3"/>
      </svg>
      Virement
    </a>

    <p class="nav-section-label">Compte</p>

    <a href="/messages" class="nav-item <%= activePage === 'messages' ? 'active' : '' %>">
      <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.3">
        <rect x="1" y="3" width="14" height="10" rx="1"/>
        <path d="M1 5l7 4 7-4"/>
      </svg>
      Messages
    </a>

    <% if (typeof user !== 'undefined' && user && user.role === 'admin') { %>
    <p class="nav-section-label">Administration</p>
    <a href="/admin" class="nav-item">
      <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.3">
        <circle cx="8" cy="5" r="3"/>
        <path d="M1 14c0-3.314 3.134-6 7-6s7 2.686 7 6"/>
      </svg>
      Admin Panel
    </a>
    <% } %>
  </nav>

  <div class="sidebar-footer">
    <div class="user-chip">
      <div class="user-avatar">
        <%= typeof user !== 'undefined' && user ? user.email.charAt(0).toUpperCase() : 'U' %>
      </div>
      <div class="user-info">
        <div class="user-email">
          <%= typeof user !== 'undefined' && user ? user.email : '' %>
        </div>
        <div class="user-role">
          <%= typeof user !== 'undefined' && user ? user.role : 'user' %>
        </div>
      </div>
      <a href="/logout" class="logout-btn" title="Se déconnecter">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.3">
          <path d="M6 2H3a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3"/>
          <path d="M11 11l3-3-3-3"/>
          <line x1="14" y1="8" x2="6" y2="8"/>
        </svg>
      </a>
    </div>
  </div>
</aside>

<!-- Mobile overlay -->
<div class="sidebar-overlay" id="overlay" onclick="closeSidebar()"></div>
